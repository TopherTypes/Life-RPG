<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LifeRPG MVP Vertical Slice</title>
  <link rel="stylesheet" href="./assets/css/styles.css" />
</head>
<body>
  <main class="app">
    <h1>LifeRPG — MVP Vertical Slice</h1>
    <p class="subtitle">Local-first daily tracking with progression recap, quests, trends, and guided reviews.</p>

    <section class="panel hero-panel">
      <div>
        <h2>Adventurer Dashboard</h2>
        <p class="muted">Track habits, earn XP, and push quest progress every day.</p>
      </div>
      <button class="primary hero-action tab-btn" data-tab="daily">Log Daily Record</button>
    </section>

    <div class="tabs">
      <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
      <button class="tab-btn" data-tab="daily">Daily Entry</button>
      <button class="tab-btn" data-tab="quests">Quest Log</button>
      <button class="tab-btn" data-tab="reviews">Reviews</button>
      <button class="tab-btn" data-tab="settings">Settings</button>
    </div>

    <section id="dashboard" class="tab panel">
      <h2>Progress Dashboard</h2>
      <div id="dashboard-content" aria-live="polite" aria-label="Dashboard overview and metric detail views">
        <div id="dashboard-overview-content" aria-label="Dashboard overview content"></div>
        <div id="dashboard-detail-content" class="hidden" aria-label="Metric detail content"></div>
      </div>
    </section>

    <section id="daily" class="tab panel hidden">
      <h2>Daily Entry</h2>
      <p class="muted">Date is required plus at least one other metric. Blank metrics are ignored for now.</p>

      <form id="entry-form">
        <div class="grid">
          <div>
            <label for="entry-date">Date (required)</label>
            <input id="entry-date" name="date" type="date" required aria-describedby="entry-date-error" />
            <p id="entry-date-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="calories">Calories In</label>
            <input id="calories" name="calories" type="number" min="0" aria-describedby="calories-error" />
            <p id="calories-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="sleepHours">Sleep Hours</label>
            <input id="sleepHours" name="sleepHours" type="number" min="0" step="0.1" aria-describedby="sleepHours-error" />
            <p id="sleepHours-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="mood">Mood (1-10)</label>
            <input id="mood" name="mood" type="number" min="1" max="10" aria-describedby="mood-error" />
            <p id="mood-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="steps">Steps</label>
            <input id="steps" name="steps" type="number" min="0" aria-describedby="steps-error" />
            <p id="steps-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="exerciseMinutes">Exercise Minutes</label>
            <input id="exerciseMinutes" name="exerciseMinutes" type="number" min="0" aria-describedby="exerciseMinutes-error" />
            <p id="exerciseMinutes-error" class="field-error" aria-live="polite"></p>
          </div>
          <div>
            <label for="exerciseEffort">Exercise Effort (1-10)</label>
            <input id="exerciseEffort" name="exerciseEffort" type="number" min="1" max="10" aria-describedby="exerciseEffort-error" />
            <p id="exerciseEffort-error" class="field-error" aria-live="polite"></p>
          </div>
        </div>

        <div class="spacer-top">
          <button class="primary" type="submit">Save Entry + Generate Recap</button>
        </div>
      </form>

      <div id="entry-messages"></div>
    </section>

    <section id="quests" class="tab panel hidden">
      <h2>Quest Log</h2>
      <p class="muted">Accept quests before they are tracked for progress.</p>
      <div id="quest-log-content"></div>
    </section>

    <section id="reviews" class="tab panel hidden">
      <h2>Weekly & Monthly Reviews</h2>
      <p class="muted">Simple MVP guided prompts; stored locally for planning rituals.</p>

      <div class="row">
        <div class="card">
          <h3>Weekly Review</h3>
          <label for="weekly-period">Week Start Date</label>
          <input id="weekly-period" type="date" />
          <label for="weekly-wins" class="label-top">Wins</label>
          <textarea id="weekly-wins" placeholder="Examples: best progress or highlights from this week..."></textarea>
          <label for="weekly-blockers" class="label-top">Blockers</label>
          <textarea id="weekly-blockers" placeholder="Examples: friction points that slowed you down..."></textarea>
          <label for="weekly-next-action" class="label-top">Next Action</label>
          <textarea id="weekly-next-action" placeholder="Examples: one concrete adjustment for next week..."></textarea>
          <label for="weekly-confidence" class="label-top">Confidence</label>
          <textarea id="weekly-confidence" placeholder="Examples: confidence score + reason (e.g., 8/10: plan feels realistic)"></textarea>
          <button id="save-weekly" class="primary spacer-top" type="button">Save Weekly Review</button>
        </div>

        <div class="card">
          <h3>Monthly Review</h3>
          <label for="monthly-period">Month (YYYY-MM-01)</label>
          <input id="monthly-period" type="date" />
          <label for="monthly-wins" class="label-top">Wins</label>
          <textarea id="monthly-wins" placeholder="Examples: strongest trend or monthly highlights..."></textarea>
          <label for="monthly-blockers" class="label-top">Blockers</label>
          <textarea id="monthly-blockers" placeholder="Examples: recurring weak points this month..."></textarea>
          <label for="monthly-next-action" class="label-top">Next Action</label>
          <textarea id="monthly-next-action" placeholder="Examples: single focus for the upcoming month..."></textarea>
          <label for="monthly-confidence" class="label-top">Confidence</label>
          <textarea id="monthly-confidence" placeholder="Examples: confidence score + reason for next month plan..."></textarea>
          <button id="save-monthly" class="primary spacer-top" type="button">Save Monthly Review</button>
        </div>
      </div>

      <div id="reviews-message"></div>
      <div id="reviews-list" class="spacer-top"></div>
    </section>

    <section id="settings" class="tab panel hidden">
      <h2>Settings</h2>
      <p class="muted">Change visual and behavior preferences for this local app profile. Unit preferences are account-specific.</p>
      <div class="cards">
        <div class="card">
          <h3>Appearance</h3>
          <label><input id="setting-compact" type="checkbox" /> Compact dashboard cards</label>
          <label class="label-top"><input id="setting-animations" type="checkbox" checked /> Enable recap animations</label>
        </div>
        <div class="card">
          <h3>Behavior</h3>
          <label><input id="setting-showtips" type="checkbox" checked /> Show guidance tips on dashboard</label>
          <label class="label-top"><input id="setting-dynamic-calorie-range" type="checkbox" /> Use adaptive TDEE for calorie adherence mechanics</label>

          <label for="setting-height-unit" class="label-top">Preferred Height Units</label>
          <select id="setting-height-unit">
            <option value="cm">Centimeters (cm)</option>
            <option value="ft_in">Feet + Inches (ft/in)</option>
          </select>

          <label for="setting-weight-unit" class="label-top">Preferred Weight Units</label>
          <select id="setting-weight-unit">
            <option value="kg">Kilograms (kg)</option>
            <option value="lb">Pounds (lb)</option>
            <option value="st_lb">Stone + Pounds (st/lb)</option>
          </select>

          <button id="reset-account" class="danger spacer-top" type="button">Reset to New Account</button>
        </div>
        <div class="card">
          <h3>Personal Profile</h3>
          <p class="muted">Profile fields support personalized calorie evaluation by estimating your daily energy needs.</p>

          <label for="profile-age">Age</label>
          <input id="profile-age" type="number" min="10" max="120" aria-describedby="profile-age-error profile-guidance" />
          <p id="profile-age-error" class="field-error" aria-live="polite"></p>

          <label for="profile-gender" class="label-top">Gender</label>
          <select id="profile-gender" aria-describedby="profile-gender-error profile-guidance">
            <option value="">Select...</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="nonbinary">Nonbinary</option>
            <option value="prefer_not_to_say">Prefer not to say</option>
          </select>
          <p id="profile-gender-error" class="field-error" aria-live="polite"></p>

          <label id="profile-height-label" for="profile-height" class="label-top">Height (cm)</label>
          <input id="profile-height" type="number" min="0" step="0.1" aria-describedby="profile-height-error profile-guidance" />
          <label id="profile-height-secondary-label" for="profile-height-secondary" class="label-top hidden">Height (in)</label>
          <input id="profile-height-secondary" class="hidden" type="number" min="0" max="11" step="1" aria-describedby="profile-height-error profile-guidance" />
          <p id="profile-height-error" class="field-error" aria-live="polite"></p>

          <label id="profile-weight-label" for="profile-weight" class="label-top">Weight (kg)</label>
          <input id="profile-weight" type="number" min="0" step="0.1" aria-describedby="profile-weight-error profile-guidance" />
          <label id="profile-weight-secondary-label" for="profile-weight-secondary" class="label-top hidden">Weight (lb)</label>
          <input id="profile-weight-secondary" class="hidden" type="number" min="0" max="13" step="1" aria-describedby="profile-weight-error profile-guidance" />
          <p id="profile-weight-error" class="field-error" aria-live="polite"></p>

          <label for="profile-activity" class="label-top">Activity Level</label>
          <select id="profile-activity" aria-describedby="profile-activity-error profile-guidance">
            <option value="">Select...</option>
            <option value="sedentary">Sedentary</option>
            <option value="light">Lightly active</option>
            <option value="moderate">Moderately active</option>
            <option value="active">Active</option>
            <option value="very_active">Very active</option>
          </select>
          <p id="profile-activity-error" class="field-error" aria-live="polite"></p>

          <label for="profile-tdee" class="label-top">Baseline TDEE (kcal/day)</label>
          <input id="profile-tdee" type="number" readonly />
          <p id="profile-tdee-dynamic" class="muted">Adaptive TDEE: —</p>
          <p id="profile-tdee-delta" class="muted">Delta: —</p>

          <p id="profile-guidance" class="muted spacer-top">Fill all profile fields to calculate TDEE. Leave fields blank if you do not want personalized calorie guidance.</p>
          <button id="save-profile" class="primary spacer-top" type="button">Save Profile</button>
        </div>
        <div class="card">
          <h3>Analytics Diagnostics (Local)</h3>
          <p class="muted">For manual QA only. Events never leave your browser unless you copy/export them.</p>
          <div class="row">
            <button id="analytics-refresh" class="ghost" type="button">Refresh Event Snapshot</button>
            <button id="analytics-copy" class="ghost" type="button">Copy JSON</button>
            <button id="analytics-clear" class="danger" type="button">Clear Event Log</button>
          </div>
          <label for="analytics-output" class="label-top">Event Log JSON</label>
          <textarea id="analytics-output" rows="8" readonly></textarea>
        </div>
      </div>
      <div id="settings-message"></div>
    </section>
  </main>

  <div id="recap-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Daily Recap</h3>
        <button id="close-recap" class="ghost" type="button">Close</button>
      </div>
      <div class="progress-dots" id="recap-dots"></div>
      <div id="recap-steps"></div>
      <div class="modal-actions">
        <button id="recap-prev" class="ghost" type="button">Back</button>
        <button id="recap-next" class="primary" type="button">Next</button>
      </div>
    </div>
  </div>


  <div id="onboarding-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-card onboarding-card">
      <div class="modal-head">
        <h3>Welcome to LifeRPG</h3>
      </div>
      <p class="muted">Complete this guided setup to personalize your account. You can update everything later in Settings.</p>

      <div class="onboarding-step" data-step="0">
        <h4>Step 1: Profile</h4>
        <p class="muted">Set your baseline profile for personalized coaching and calorie guidance.</p>
        <label for="onboarding-age">Age</label>
        <input id="onboarding-age" type="number" min="10" max="120" />

        <label for="onboarding-gender" class="label-top">Gender</label>
        <select id="onboarding-gender">
          <option value="">Select...</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="nonbinary">Nonbinary</option>
          <option value="prefer_not_to_say">Prefer not to say</option>
        </select>

        <label for="onboarding-activity" class="label-top">Activity Level</label>
        <select id="onboarding-activity">
          <option value="">Select...</option>
          <option value="sedentary">Sedentary</option>
          <option value="light">Lightly active</option>
          <option value="moderate">Moderately active</option>
          <option value="active">Active</option>
          <option value="very_active">Very active</option>
        </select>
      </div>

      <div class="onboarding-step hidden" data-step="1">
        <h4>Step 2: Choose goals to track</h4>
        <div class="grid">
          <label><input id="onboarding-goal-calories" type="checkbox" checked /> <span data-goal-label="calories">Calories In</span></label>
          <label><input id="onboarding-goal-sleepHours" type="checkbox" checked /> <span data-goal-label="sleepHours">Sleep Hours</span></label>
          <label><input id="onboarding-goal-mood" type="checkbox" checked /> <span data-goal-label="mood">Mood</span></label>
          <label><input id="onboarding-goal-steps" type="checkbox" checked /> <span data-goal-label="steps">Steps</span></label>
          <label><input id="onboarding-goal-exerciseMinutes" type="checkbox" checked /> <span data-goal-label="exerciseMinutes">Exercise Minutes</span></label>
          <label><input id="onboarding-goal-exerciseEffort" type="checkbox" checked /> <span data-goal-label="exerciseEffort">Exercise Effort</span></label>
        </div>
      </div>

      <div class="onboarding-step hidden" data-step="2">
        <h4>Step 3: Units & app preferences</h4>
        <label for="onboarding-height-unit">Height Units</label>
        <select id="onboarding-height-unit">
          <option value="cm">Centimeters (cm)</option>
          <option value="ft_in">Feet + Inches (ft/in)</option>
        </select>

        <label for="onboarding-weight-unit" class="label-top">Weight Units</label>
        <select id="onboarding-weight-unit">
          <option value="kg">Kilograms (kg)</option>
          <option value="lb">Pounds (lb)</option>
          <option value="st_lb">Stone + Pounds (st/lb)</option>
        </select>

        <label for="onboarding-height-primary" class="label-top">Height</label>
        <input id="onboarding-height-primary" type="number" min="0" step="0.1" />
        <label for="onboarding-height-secondary" class="label-top">Height Secondary (inches for ft/in)</label>
        <input id="onboarding-height-secondary" type="number" min="0" max="11" step="1" />

        <label for="onboarding-weight-primary" class="label-top">Weight</label>
        <input id="onboarding-weight-primary" type="number" min="0" step="0.1" />
        <label for="onboarding-weight-secondary" class="label-top">Weight Secondary (pounds for st/lb)</label>
        <input id="onboarding-weight-secondary" type="number" min="0" max="13" step="1" />

        <label class="label-top"><input id="onboarding-setting-compact" type="checkbox" /> Compact dashboard cards</label>
        <label class="label-top"><input id="onboarding-setting-animations" type="checkbox" checked /> Enable recap animations</label>
        <label class="label-top"><input id="onboarding-setting-showtips" type="checkbox" checked /> Show dashboard guidance tips</label>
      </div>

      <div id="onboarding-message"></div>
      <div class="modal-actions spacer-top">
        <button id="onboarding-prev" class="ghost hidden" type="button">Back</button>
        <button id="onboarding-next" class="primary" type="button">Next</button>
        <button id="onboarding-complete" class="primary hidden" type="button">Finish Setup</button>
      </div>
    </div>
  </div>

  <script type="module" src="./assets/js/main.js"></script>
</body>
</html>
